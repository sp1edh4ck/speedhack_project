{% extends 'base.html' %}
{% load static %}
{% block title %}speedhack / пользователи{% endblock %}
{% load user_filters %}
{% block content %}
  <div class="main">
    <div class="frame_con">
      <div style="display: block;">
        <div class="frame-left-first-users">
          <span style="color: gray; font-size: 18px;">Найти пользователя</span>
          <div style="display: flex;">
            <div>
              <form action="{% url 'forum:users' %}">
                <input class="input-search-users" type="search" name="search" placeholder="Имя..." aria-label="Search" autocomplete="off">
              </form>
            </div>
            <div>
              <a href="{% url 'forum:users' %}"><i class="fa fa-times-circle fa-lg icons-users"></i></a>
            </div>
          </div>
        </div>
        <div class="frame-left-second-users">
          <span style="color: gray; font-size: 16px;">Статистика форума</span>
          <div style="display: block; font-size: 15px;">
            <div style="margin-top: 15px; color: gray;">
              <label>Тем:</label>
              <label style="color: #d6d6d6;">{{ posts.count|bf_number }}</label>
            </div>
            <div style="margin-top: 3px; color: gray;">
              <label>Сообщений:</label>
              <label style="color: #d6d6d6;">{{ messages.count|bf_number }}</label>
            </div>
            <div style="margin-top: 3px; color: gray;">
              <label>Пользователей:</label>
              <label style="color: #d6d6d6;">{{ users_list.count|bf_number }}</label>
            </div>
          </div>
        </div>
        {% comment %} <div class="frame-left-second-users">
          <span style="color: gray; font-size: 16px;">Статистика маркета</span>
          <div style="display: block; font-size: 15px;">
            <div style="margin-top: 15px; color: gray;">
              <label>Продавцов:</label>
              <label style="color: #d6d6d6;">{{ users_sellers|bf_number }}</label>
            </div>
            <div style="margin-top: 3px; color: gray;">
              <label>Аккаунтов:</label>
              <label style="color: #d6d6d6;">{{ accs.count|bf_number }}</label>
            </div>
          </div>
        </div> {% endcomment %}
        <div class="frame-left-second-users" style="{% if new_users.count == 1 %}min-height: 90px; max-height: 90px;{% elif new_users.count == 2 %}min-height: 170px; max-height: 170px;{% elif new_users.count == 3 %}min-height: 225px; max-height: 225px;{% elif new_users.count == 4 %}min-height: 280px; max-height: 280px;{% elif new_users.count == 5 %}min-height: 335px; max-height: 335px;{% elif new_users.count == 6 %}min-height: 390px; max-height: 390px;{% elif new_users.count == 7 %}min-height: 445px; max-height: 445px;{% endif %}">
          <div style="color: gray; font-size: 18px; margin-bottom: 15px;">Новые пользователи</div>
          {% for user in new_users %}
            <div style="display: flex; max-height: 55px;">
              <a class="a-users" href="{% url 'forum:profile' user.username %}">
                <img style="width: 50px; border-radius: 50px;" src="{{ user.avatar.url }}">
              </a>
              <div style="margin-left: 10px;">
                <a href="{% url 'forum:profile' user.username %}" style="text-decoration: none; cursor: pointer; font-size: 14px;">
                  <label class="users-un {% if user.username_style != 'gray-un' and user.rank != 'заблокирован' %}{{ user.username_style }}{% endif %}" {% if user.rank == 'заблокирован' %}style="text-decoration: line-through;"{% endif %} {% if user.username == "root" %}style="color: red;"{% endif %} style=" font-size: 16px;">{{ user.username }}</label>
                </a>
                <div style="color: #d6d6d6; font-size: 14px;">{{ user.date_joined|date:'d E Y' }}</div>
              </div>
            </div>
          {% endfor %}
        </div>
      </div>
      <div>
        <div class="admin-frame-right">
          <a data-tab="#users_list_bySymps" class="button-tools active-tab">Больше всех симпатий</a>
          <a data-tab="#users_list_byComments" class="button-tools">Больше всех сообщений</a>
          <a data-tab="#users_list_byStaff" class="button-tools">Команда форума</a>
        </div>
        <div id="users_list_bySymps" class="tabItem frame-right-users users-display active-tab">
          {% if users_list_bySymps.count != 0 %}
            {% for user in users_list_bySymps %}
              <div class="users-div" style="{% if user.description != '' %}min-height: 125px; max-height: 125px;{% else %}min-height: 100px; max-height: 100px;{% endif %}">
                <div style="padding: 10px 0 10px 10px;">
                  <a class="a-users" href="{% url 'forum:profile' user.username %}">
                    <img style="width: 60px; border-radius: 50px;" src="{{ user.avatar.url }}">
                  </a>
                  {% if user.is_online == True %}
                    <div class="online online-avatar"></div>
                  {% endif %}
                </div>
                <div style="margin-left: 20px; padding: 10px 0 10px 0;">
                  <div style="display: flex;">
                    <div style="margin: 0;">
                      <a href="{% url 'forum:profile' user.username %}" style="text-decoration: none; cursor: pointer;">
                        <label class="users-un {% if user.username_style != 'gray-un' and user.rank != 'заблокирован' %}{{ user.username_style }}{% endif %}" {% if user.rank == 'заблокирован' %}style="text-decoration: line-through;"{% endif %} {% if user.username == "root" %}style="color: red;"{% endif %}>{{ user.username }}</label>
                      </a>
                      <div style="color: #909090; margin: 3px 0;">
                        <label>{{ user.description }}</label>
                      </div>
                      <div style="margin-top: 7px; color: #999999; font-weight: bold;">
                        <img class="heart-users" src="{% static 'images/heart_gray.png' %}"> <label style="margin-right: 20px;">{{ user.symper.count|bf_number }}</label>
                        <img class="heart-users" src="{% static 'images/messages.png' %}"> <label>{{ user.comments.count|bf_number }}</label>
                      </div>
                    </div>
                    {% comment %} <div style="align: right;">
                      <label style="color: #ff506f; font-size: 21px;">{{ user.symps }}</label>
                    </div> {% endcomment %}
                  </div>
                </div>
              </div>
              {% if not forloop.last %}<hr style="border: 1px solid #444444; padding: 0;">{% endif %}
            {% endfor %}
          {% else %}
            <div style="margin: 15px 0 0 20px; text-align: center; padding: 15px;">
              <label style="color: #515151; font-size: 18px; font-weight: bold;">Нет пользователя с данным именем :/</label>
            </div>
          {% endif %}
        </div>
        <div id="users_list_byComments" class="tabItem frame-right-users users-display">
          {% if users_list_byComments.count != 0 %}
            {% for user in users_list_byComments %}
              <div class="users-div" style="{% if user.description != '' %}min-height: 125px; max-height: 125px;{% else %}min-height: 100px; max-height: 100px;{% endif %}">
                <div style="padding: 10px 0 10px 10px;">
                  <a class="a-users" href="{% url 'forum:profile' user.username %}">
                    <img style="width: 60px; border-radius: 50px;" src="{{ user.avatar.url }}">
                  </a>
                  {% if user.is_online == True %}
                    <div class="online online-avatar"></div>
                  {% endif %}
                </div>
                <div style="margin-left: 20px; padding: 10px 0 10px 0;">
                  <div style="display: flex;">
                    <div style="margin: 0;">
                      <a href="{% url 'forum:profile' user.username %}" style="text-decoration: none; cursor: pointer;">
                        <label class="users-un {% if user.username_style != 'gray-un' and user.rank != 'заблокирован' %}{{ user.username_style }}{% endif %}" {% if user.rank == 'заблокирован' %}style="text-decoration: line-through;"{% endif %} {% if user.username == "root" %}style="color: red;"{% endif %}>{{ user.username }}</label>
                      </a>
                      <div style="color: #909090; margin: 3px 0;">
                        <label>{{ user.description }}</label>
                      </div>
                      <div style="margin-top: 7px; color: #999999; font-weight: bold;">
                        <img class="heart-users" src="{% static 'images/heart_gray.png' %}"> <label style="margin-right: 20px;">{{ user.symper.count|bf_number }}</label>
                        <img class="heart-users" src="{% static 'images/messages.png' %}"> <label>{{ user.comments.count|bf_number }}</label>
                      </div>
                    </div>
                    {% comment %} <div style="align: right;">
                      <label style="color: #ff506f; font-size: 21px;">{{ user.symps }}</label>
                    </div> {% endcomment %}
                  </div>
                </div>
              </div>
              {% if not forloop.last %}<hr style="border: 1px solid #444444; padding: 0;">{% endif %}
            {% endfor %}
          {% else %}
            <div style="margin: 15px 0 0 20px; text-align: center; padding: 15px;">
              <label style="color: #515151; font-size: 18px; font-weight: bold;">Нет пользователя с данным именем :/</label>
            </div>
          {% endif %}
        </div>
        <div id="users_list_byStaff" class="tabItem frame-right-users users-display">
          {% if users_list_byStaff.count != 0 %}
            {% for user in users_list_byStaff %}
              {% if user|permission_access:'designer' %}
                <div class="users-div" style="{% if user.description != '' %}min-height: 125px; max-height: 125px;{% else %}min-height: 100px; max-height: 100px;{% endif %}">
                  <div style="padding: 10px 0 10px 10px;">
                    <a class="a-users" href="{% url 'forum:profile' user.username %}">
                      <img style="width: 60px; border-radius: 50px;" src="{{ user.avatar.url }}">
                    </a>
                    {% if user.is_online == True %}
                      <div class="online online-avatar"></div>
                    {% endif %}
                  </div>
                  <div style="margin-left: 20px; padding: 10px 0 10px 0;">
                    <div style="display: flex;">
                      <div style="margin: 0;">
                        <a href="{% url 'forum:profile' user.username %}" style="text-decoration: none; cursor: pointer;">
                          <label class="users-un {% if user.username_style != 'gray-un' and user.rank != 'заблокирован' %}{{ user.username_style }}{% endif %}" {% if user.rank == 'заблокирован' %}style="text-decoration: line-through;"{% endif %} {% if user.username == "root" %}style="color: red;"{% endif %}>{{ user.username }}</label>
                        </a>
                        <div style="color: #909090; margin: 3px 0;">
                          <label>{{ user.description }}</label>
                        </div>
                        <div style="margin-top: 7px; color: #999999; font-weight: bold;">
                          <img class="heart-users" src="{% static 'images/heart_gray.png' %}"> <label style="margin-right: 20px;">{{ user.symper.count|bf_number }}</label>
                          <img class="heart-users" src="{% static 'images/messages.png' %}"> <label>{{ user.comments.count|bf_number }}</label>
                        </div>
                      </div>
                      {% comment %} <div>
                        <label style="color: #ff506f; font-size: 21px;">{{ users.symps }}</label>
                      </div> {% endcomment %}
                    </div>
                  </div>
                </div>
                {% if not forloop.last %}<hr style="border: 1px solid #444444; padding: 0;">{% endif %}
              {% endif %}
            {% endfor %}
          {% else %}
            <div style="margin: 15px 0 0 20px; text-align: center; padding: 15px;">
              <label style="color: #515151; font-size: 18px; font-weight: bold;">Нет пользователя с данным именем :/</label>
            </div>
          {% endif %}
        </div>
      </div>
    </div>
  </div>
  <script type="text/javascript" src="{% static 'js/profile.js' %}"></script>
{% endblock %}